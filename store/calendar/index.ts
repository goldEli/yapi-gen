import { createSlice, PayloadAction } from '@reduxjs/toolkit'
import dayjs from 'dayjs'
import { getCalendarList } from './calendar.thunk'

type SliceState = {
  // 左侧-日历列表
  calendarData: Model.Calendar.CalendarData
  // 左侧-日历列表-选中的日历
  checkedCalendarList: Model.Calendar.Info[]
  // 日历路由记录
  routerMenu: Model.Calendar.RouterMenu
  menuList: Model.Calendar.RouterMenu[]
  // 选择的日期
  selectedDay: number
  // 选择的周
  selectedWeek: {
    date: number
  }[]
  // 是否打开创建或者是编辑日程弹窗
  isShowScheduleVisible: boolean
  showScheduleParams: Model.Calendar.ShowScheduleParams
  partialDayTimeOption: { label: string; value: number }[]
  // 选择的月信息
  selectedMonth: Model.Calendar.DayOfMonth[]
}

const initialState: SliceState = {
  calendarData: {
    manage: [],
    sub: [],
  },
  checkedCalendarList: [],
  menuList: [
    { name: '视图选项', key: 'view' },
    { name: '日程设置', key: 'schedule' },
    { name: '通知设置', key: 'notice' },
    { name: '日历导入', key: 'import' },
    { name: '日历导出', key: 'export' },
  ],
  routerMenu: {
    name: '',
    key: '',
  },
  selectedDay: dayjs('2023-3-30 13:10:00').valueOf(),
  selectedWeek: [
    {
      date: dayjs('2023-3-26 00:00:00').valueOf(),
    },
    {
      date: dayjs('2023-3-27 00:00:00').valueOf(),
    },
    {
      date: dayjs('2023-3-28 00:00:00').valueOf(),
    },
    {
      date: dayjs('2023-3-29 00:00:00').valueOf(),
    },
    {
      date: dayjs('2023-3-30 00:00:00').valueOf(),
    },
    {
      date: dayjs('2023-3-31 00:00:00').valueOf(),
    },
    {
      date: dayjs('2023-4-1 00:00:00').valueOf(),
    },
  ],
  isShowScheduleVisible: false,
  showScheduleParams: {},
  partialDayTimeOption: [
    { label: '日程开始时', value: 0 },
    { label: '提前5分钟', value: 1 },
    { label: '提前15分钟', value: 2 },
    { label: '提前30分钟', value: 3 },
    { label: '提前1小时', value: 4 },
    { label: '提前2小时', value: 5 },
    { label: '提前3小时', value: 6 },
    { label: '提前1天', value: 7 },
    { label: '提前2天', value: 8 },
    { label: '提前1周', value: 9 },
  ],
  selectedMonth: [
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '初五',
      term: '',
      week_no: 0,
      week_name: '星期日',
      constellation: '白羊',
      is_current_month: false,
      year: 2023,
      month: 3,
      day: 26,
      week_num: 13,
      date: '2023-03-26',
      datetime: '2023-03-26 00:00:00',
      date_object: '2023-03-25T16:00:00.000000Z',
      timestamp: 1679760000,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '初六',
      term: '',
      week_no: 1,
      week_name: '星期一',
      constellation: '白羊',
      is_current_month: false,
      year: 2023,
      month: 3,
      day: 27,
      week_num: 13,
      date: '2023-03-27',
      datetime: '2023-03-27 00:00:00',
      date_object: '2023-03-25T16:00:00.000000Z',
      timestamp: 1679846400,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '初七',
      term: '',
      week_no: 2,
      week_name: '星期二',
      constellation: '白羊',
      is_current_month: false,
      year: 2023,
      month: 3,
      day: 28,
      week_num: 13,
      date: '2023-03-28',
      datetime: '2023-03-28 00:00:00',
      date_object: '2023-03-25T16:00:00.000000Z',
      timestamp: 1679932800,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '初八',
      term: '',
      week_no: 3,
      week_name: '星期三',
      constellation: '白羊',
      is_current_month: false,
      year: 2023,
      month: 3,
      day: 29,
      week_num: 13,
      date: '2023-03-29',
      datetime: '2023-03-29 00:00:00',
      date_object: '2023-03-25T16:00:00.000000Z',
      timestamp: 1680019200,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '初九',
      term: '',
      week_no: 4,
      week_name: '星期四',
      constellation: '白羊',
      is_current_month: false,
      year: 2023,
      month: 3,
      day: 30,
      week_num: 13,
      date: '2023-03-30',
      datetime: '2023-03-30 00:00:00',
      date_object: '2023-03-25T16:00:00.000000Z',
      timestamp: 1680105600,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '初十',
      term: '',
      week_no: 5,
      week_name: '星期五',
      constellation: '白羊',
      is_current_month: false,
      year: 2023,
      month: 3,
      day: 31,
      week_num: 13,
      date: '2023-03-31',
      datetime: '2023-03-31 00:00:00',
      date_object: '2023-03-25T16:00:00.000000Z',
      timestamp: 1680192000,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '十一',
      term: '',
      week_no: 6,
      week_name: '星期六',
      constellation: '白羊',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 1,
      week_num: 13,
      date: '2023-04-01',
      datetime: '2023-04-01 00:00:00',
      date_object: '2023-03-31T16:00:00.000000Z',
      timestamp: 1680278400,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '十二',
      term: '',
      week_no: 0,
      week_name: '星期日',
      constellation: '白羊',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 2,
      week_num: 14,
      date: '2023-04-02',
      datetime: '2023-04-02 00:00:00',
      date_object: '2023-04-01T16:00:00.000000Z',
      timestamp: 1680364800,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '十三',
      term: '',
      week_no: 1,
      week_name: '星期一',
      constellation: '白羊',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 3,
      week_num: 14,
      date: '2023-04-03',
      datetime: '2023-04-03 00:00:00',
      date_object: '2023-04-02T16:00:00.000000Z',
      timestamp: 1680451200,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '十四',
      term: '',
      week_no: 2,
      week_name: '星期二',
      constellation: '白羊',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 4,
      week_num: 14,
      date: '2023-04-04',
      datetime: '2023-04-04 00:00:00',
      date_object: '2023-04-03T16:00:00.000000Z',
      timestamp: 1680537600,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '十五',
      term: '清明',
      week_no: 3,
      week_name: '星期三',
      constellation: '白羊',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 5,
      week_num: 14,
      date: '2023-04-05',
      datetime: '2023-04-05 00:00:00',
      date_object: '2023-04-04T16:00:00.000000Z',
      timestamp: 1680624000,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '十六',
      term: '',
      week_no: 4,
      week_name: '星期四',
      constellation: '白羊',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 6,
      week_num: 14,
      date: '2023-04-06',
      datetime: '2023-04-06 00:00:00',
      date_object: '2023-04-05T16:00:00.000000Z',
      timestamp: 1680710400,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '十七',
      term: '',
      week_no: 5,
      week_name: '星期五',
      constellation: '白羊',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 7,
      week_num: 14,
      date: '2023-04-07',
      datetime: '2023-04-07 00:00:00',
      date_object: '2023-04-06T16:00:00.000000Z',
      timestamp: 1680796800,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '十八',
      term: '',
      week_no: 6,
      week_name: '星期六',
      constellation: '白羊',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 8,
      week_num: 14,
      date: '2023-04-08',
      datetime: '2023-04-08 00:00:00',
      date_object: '2023-04-07T16:00:00.000000Z',
      timestamp: 1680883200,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '十九',
      term: '',
      week_no: 0,
      week_name: '星期日',
      constellation: '白羊',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 9,
      week_num: 15,
      date: '2023-04-09',
      datetime: '2023-04-09 00:00:00',
      date_object: '2023-04-08T16:00:00.000000Z',
      timestamp: 1680969600,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '二十',
      term: '',
      week_no: 1,
      week_name: '星期一',
      constellation: '白羊',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 10,
      week_num: 15,
      date: '2023-04-10',
      datetime: '2023-04-10 00:00:00',
      date_object: '2023-04-09T16:00:00.000000Z',
      timestamp: 1681056000,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '廿一',
      term: '',
      week_no: 2,
      week_name: '星期二',
      constellation: '白羊',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 11,
      week_num: 15,
      date: '2023-04-11',
      datetime: '2023-04-11 00:00:00',
      date_object: '2023-04-10T16:00:00.000000Z',
      timestamp: 1681142400,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '廿二',
      term: '',
      week_no: 3,
      week_name: '星期三',
      constellation: '白羊',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 12,
      week_num: 15,
      date: '2023-04-12',
      datetime: '2023-04-12 00:00:00',
      date_object: '2023-04-11T16:00:00.000000Z',
      timestamp: 1681228800,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '廿三',
      term: '',
      week_no: 4,
      week_name: '星期四',
      constellation: '白羊',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 13,
      week_num: 15,
      date: '2023-04-13',
      datetime: '2023-04-13 00:00:00',
      date_object: '2023-04-12T16:00:00.000000Z',
      timestamp: 1681315200,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '廿四',
      term: '',
      week_no: 5,
      week_name: '星期五',
      constellation: '白羊',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 14,
      week_num: 15,
      date: '2023-04-14',
      datetime: '2023-04-14 00:00:00',
      date_object: '2023-04-13T16:00:00.000000Z',
      timestamp: 1681401600,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '廿五',
      term: '',
      week_no: 6,
      week_name: '星期六',
      constellation: '白羊',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 15,
      week_num: 15,
      date: '2023-04-15',
      datetime: '2023-04-15 00:00:00',
      date_object: '2023-04-14T16:00:00.000000Z',
      timestamp: 1681488000,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '廿六',
      term: '',
      week_no: 0,
      week_name: '星期日',
      constellation: '白羊',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 16,
      week_num: 16,
      date: '2023-04-16',
      datetime: '2023-04-16 00:00:00',
      date_object: '2023-04-15T16:00:00.000000Z',
      timestamp: 1681574400,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '廿七',
      term: '',
      week_no: 1,
      week_name: '星期一',
      constellation: '白羊',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 17,
      week_num: 16,
      date: '2023-04-17',
      datetime: '2023-04-17 00:00:00',
      date_object: '2023-04-16T16:00:00.000000Z',
      timestamp: 1681660800,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '廿八',
      term: '',
      week_no: 2,
      week_name: '星期二',
      constellation: '白羊',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 18,
      week_num: 16,
      date: '2023-04-18',
      datetime: '2023-04-18 00:00:00',
      date_object: '2023-04-17T16:00:00.000000Z',
      timestamp: 1681747200,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '闰二月',
      lunar_day_chinese: '廿九',
      term: '',
      week_no: 3,
      week_name: '星期三',
      constellation: '白羊',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 19,
      week_num: 16,
      date: '2023-04-19',
      datetime: '2023-04-19 00:00:00',
      date_object: '2023-04-18T16:00:00.000000Z',
      timestamp: 1681833600,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '三月',
      lunar_day_chinese: '初一',
      term: '谷雨',
      week_no: 4,
      week_name: '星期四',
      constellation: '白羊',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 20,
      week_num: 16,
      date: '2023-04-20',
      datetime: '2023-04-20 00:00:00',
      date_object: '2023-04-19T16:00:00.000000Z',
      timestamp: 1681920000,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '三月',
      lunar_day_chinese: '初二',
      term: '',
      week_no: 5,
      week_name: '星期五',
      constellation: '金牛',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 21,
      week_num: 16,
      date: '2023-04-21',
      datetime: '2023-04-21 00:00:00',
      date_object: '2023-04-20T16:00:00.000000Z',
      timestamp: 1682006400,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '三月',
      lunar_day_chinese: '初三',
      term: '上巳节',
      week_no: 6,
      week_name: '星期六',
      constellation: '金牛',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 22,
      week_num: 16,
      date: '2023-04-22',
      datetime: '2023-04-22 00:00:00',
      date_object: '2023-04-21T16:00:00.000000Z',
      timestamp: 1682092800,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '三月',
      lunar_day_chinese: '初四',
      term: '',
      week_no: 0,
      week_name: '星期日',
      constellation: '金牛',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 23,
      week_num: 17,
      date: '2023-04-23',
      datetime: '2023-04-23 00:00:00',
      date_object: '2023-04-22T16:00:00.000000Z',
      timestamp: 1682179200,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '三月',
      lunar_day_chinese: '初五',
      term: '',
      week_no: 1,
      week_name: '星期一',
      constellation: '金牛',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 24,
      week_num: 17,
      date: '2023-04-24',
      datetime: '2023-04-24 00:00:00',
      date_object: '2023-04-23T16:00:00.000000Z',
      timestamp: 1682265600,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '三月',
      lunar_day_chinese: '初六',
      term: '',
      week_no: 2,
      week_name: '星期二',
      constellation: '金牛',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 25,
      week_num: 17,
      date: '2023-04-25',
      datetime: '2023-04-25 00:00:00',
      date_object: '2023-04-24T16:00:00.000000Z',
      timestamp: 1682352000,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '三月',
      lunar_day_chinese: '初七',
      term: '',
      week_no: 3,
      week_name: '星期三',
      constellation: '金牛',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 26,
      week_num: 17,
      date: '2023-04-26',
      datetime: '2023-04-26 00:00:00',
      date_object: '2023-04-25T16:00:00.000000Z',
      timestamp: 1682438400,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '三月',
      lunar_day_chinese: '初八',
      term: '',
      week_no: 4,
      week_name: '星期四',
      constellation: '金牛',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 27,
      week_num: 17,
      date: '2023-04-27',
      datetime: '2023-04-27 00:00:00',
      date_object: '2023-04-26T16:00:00.000000Z',
      timestamp: 1682524800,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '三月',
      lunar_day_chinese: '初九',
      term: '',
      week_no: 5,
      week_name: '星期五',
      constellation: '金牛',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 28,
      week_num: 17,
      date: '2023-04-28',
      datetime: '2023-04-28 00:00:00',
      date_object: '2023-04-27T16:00:00.000000Z',
      timestamp: 1682611200,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '三月',
      lunar_day_chinese: '初十',
      term: '',
      week_no: 6,
      week_name: '星期六',
      constellation: '金牛',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 29,
      week_num: 17,
      date: '2023-04-29',
      datetime: '2023-04-29 00:00:00',
      date_object: '2023-04-28T16:00:00.000000Z',
      timestamp: 1682697600,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '三月',
      lunar_day_chinese: '十一',
      term: '',
      week_no: 0,
      week_name: '星期日',
      constellation: '金牛',
      is_current_month: true,
      year: 2023,
      month: 4,
      day: 30,
      week_num: 18,
      date: '2023-04-30',
      datetime: '2023-04-30 00:00:00',
      date_object: '2023-04-29T16:00:00.000000Z',
      timestamp: 1682784000,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '三月',
      lunar_day_chinese: '十二',
      term: '',
      week_no: 1,
      week_name: '星期一',
      constellation: '金牛',
      is_current_month: false,
      year: 2023,
      month: 5,
      day: 1,
      week_num: 18,
      date: '2023-05-01',
      datetime: '2023-05-01 00:00:00',
      date_object: '2023-05-05T16:00:00.000000Z',
      timestamp: 1682870400,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '三月',
      lunar_day_chinese: '十三',
      term: '',
      week_no: 2,
      week_name: '星期二',
      constellation: '金牛',
      is_current_month: false,
      year: 2023,
      month: 5,
      day: 2,
      week_num: 18,
      date: '2023-05-02',
      datetime: '2023-05-02 00:00:00',
      date_object: '2023-05-05T16:00:00.000000Z',
      timestamp: 1682956800,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '三月',
      lunar_day_chinese: '十四',
      term: '',
      week_no: 3,
      week_name: '星期三',
      constellation: '金牛',
      is_current_month: false,
      year: 2023,
      month: 5,
      day: 3,
      week_num: 18,
      date: '2023-05-03',
      datetime: '2023-05-03 00:00:00',
      date_object: '2023-05-05T16:00:00.000000Z',
      timestamp: 1683043200,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '三月',
      lunar_day_chinese: '十五',
      term: '',
      week_no: 4,
      week_name: '星期四',
      constellation: '金牛',
      is_current_month: false,
      year: 2023,
      month: 5,
      day: 4,
      week_num: 18,
      date: '2023-05-04',
      datetime: '2023-05-04 00:00:00',
      date_object: '2023-05-05T16:00:00.000000Z',
      timestamp: 1683129600,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '三月',
      lunar_day_chinese: '十六',
      term: '',
      week_no: 5,
      week_name: '星期五',
      constellation: '金牛',
      is_current_month: false,
      year: 2023,
      month: 5,
      day: 5,
      week_num: 18,
      date: '2023-05-05',
      datetime: '2023-05-05 00:00:00',
      date_object: '2023-05-05T16:00:00.000000Z',
      timestamp: 1683216000,
      timezone_name: 'PRC',
    },
    {
      lunar_year_chinese: '二零二三',
      lunar_month_chinese: '三月',
      lunar_day_chinese: '十七',
      term: '立夏',
      week_no: 6,
      week_name: '星期六',
      constellation: '金牛',
      is_current_month: false,
      year: 2023,
      month: 5,
      day: 6,
      week_num: 18,
      date: '2023-05-06',
      datetime: '2023-05-06 00:00:00',
      date_object: '2023-05-05T16:00:00.000000Z',
      timestamp: 1683302400,
      timezone_name: 'PRC',
    },
  ],
}

const slice = createSlice({
  name: 'calendar',
  initialState,
  reducers: {
    setCalendarData(state, action: PayloadAction<SliceState['calendarData']>) {
      state.calendarData = action.payload
    },
    setCheckedCalendarList(
      state,
      action: PayloadAction<SliceState['checkedCalendarList']>,
    ) {
      state.checkedCalendarList = action.payload
    },
    setRouterMenu(state, action: PayloadAction<SliceState['routerMenu']>) {
      state.routerMenu = action.payload
    },
    setSelectedDay(state, action: PayloadAction<SliceState['selectedDay']>) {
      state.selectedDay = action.payload
    },
    setIsShowScheduleVisible(
      state,
      action: PayloadAction<SliceState['isShowScheduleVisible']>,
    ) {
      state.isShowScheduleVisible = action.payload
    },
    setShowScheduleParams(
      state,
      action: PayloadAction<SliceState['showScheduleParams']>,
    ) {
      state.showScheduleParams = action.payload
    },
  },
  extraReducers(builder) {
    builder.addCase(getCalendarList.fulfilled, (state, action) => {
      state.calendarData = action.payload
      const checkManageList = action.payload.manage?.filter(
        (i: Model.Calendar.Info) => i.is_check,
      )
      const checkSubList = action.payload.sub?.filter(
        (i: Model.Calendar.Info) => i.is_check,
      )
      // 获取当前数据默认选择的日历
      state.checkedCalendarList = [...checkManageList, ...checkSubList]
    })
  },
})

const calendar = slice.reducer

export const {
  setCheckedCalendarList,
  setCalendarData,
  setRouterMenu,
  setIsShowScheduleVisible,
  setShowScheduleParams,
} = slice.actions

export default calendar
